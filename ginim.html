<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Ping Tester</title>
    <style>
        /* ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
        body {
            background-color: #1a1b26;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .card {
            background-color: #16181c;
            padding: 30px;
            border-radius: 12px;
            width: 380px;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            border-top: 4px solid #00c9a7;
        }

        h2 { margin-top: 0; font-size: 22px; }
        p { color: #8b9bb4; font-size: 13px; margin-bottom: 25px; line-height: 1.5; }

        .location-list { list-style: none; padding: 0; }

        .location-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #2c3038;
            font-size: 15px;
        }
        
        .location-item:last-child { border-bottom: none; }

        .flag { margin-right: 12px; font-size: 18px; }
        
        .ping-value { font-weight: bold; font-family: monospace; font-size: 16px; }
        
        /* ‡¶™‡¶ø‡¶Ç ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° */
        .ping-green { color: #00c9a7; text-shadow: 0 0 10px rgba(0, 201, 167, 0.4); }
        .ping-yellow { color: #f1c40f; text-shadow: 0 0 10px rgba(241, 196, 15, 0.4); }
        .ping-red { color: #e74c3c; text-shadow: 0 0 10px rgba(231, 76, 60, 0.4); }
        .ping-loading { color: #8b9bb4; }

        .ping-btn {
            background: linear-gradient(90deg, #2c3038 0%, #3a404d 100%);
            color: white;
            border: 1px solid #3e4451;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            margin-top: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .ping-btn:hover { 
            background: linear-gradient(90deg, #3e4451 0%, #4b5563 100%);
            transform: translateY(-2px);
        }
        
        .ping-btn:active { transform: translateY(0); }
        .ping-btn:disabled { opacity: 0.7; cursor: not-allowed; }

    </style>
</head>
<body>

<div class="card">
    <h2>Server Latency</h2>
    <p>Checking connection with official AWS & Cloudflare endpoints for accurate gaming ping.</p>

    <ul class="location-list" id="serverList">
        </ul>

    <button class="ping-btn" onclick="startPingTest()">Ping All Locations</button>
</div>

<script>
    // ‡ßß. ‡¶∏‡¶†‡¶ø‡¶ï ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶è‡¶®‡ßç‡¶°‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü (AWS Region Specific)
    // ‡¶è‡¶á ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ó‡ßá‡¶Æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶Ø‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡ßá, ‡¶†‡¶ø‡¶ï ‡¶∏‡ßá‡¶ñ‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡•§
    const locations = [
        { 
            name: "Singapore", 
            flag: "üá∏üá¨", 
            // AWS Singapore (ap-southeast-1)
            url: "https://dynamodb.ap-southeast-1.amazonaws.com" 
        },
        { 
            name: "Mumbai", 
            flag: "üáÆüá≥", 
            // AWS Mumbai (ap-south-1)
            url: "https://dynamodb.ap-south-1.amazonaws.com" 
        },
        { 
            name: "Hyderabad", 
            flag: "üáÆüá≥", 
            // AWS Hyderabad (ap-south-2) - ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶ú‡¶ø‡ßü‡¶®
            url: "https://dynamodb.ap-south-2.amazonaws.com" 
        }
    ];

    const listContainer = document.getElementById('serverList');

    // UI ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
    function renderList() {
        listContainer.innerHTML = '';
        locations.forEach((loc, index) => {
            const li = document.createElement('li');
            li.className = 'location-item';
            li.innerHTML = `
                <div style="display: flex; align-items: center;">
                    <span class="flag">${loc.flag}</span>
                    <span>${loc.name}</span>
                </div>
                <span id="ping-${index}" class="ping-value ping-loading">-- ms</span>
            `;
            listContainer.appendChild(li);
        });
    }

    // ‡¶™‡¶ø‡¶Ç ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶∏‡¶≤ ‡¶Æ‡ßá‡¶•‡¶°
    async function getPing(url) {
        // ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ø‡¶æ‡¶§‡ßá ‡¶®‡¶æ ‡¶ß‡¶∞‡ßá ‡¶§‡¶æ‡¶á ‡¶ü‡¶æ‡¶á‡¶Æ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
        const cacheBuster = `?t=${new Date().getTime()}`;
        const targetUrl = url + cacheBuster;
        
        const startTime = performance.now();
        
        try {
            // 'no-cors' ‡¶Æ‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø, ‡¶è‡¶§‡ßá ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶ü‡¶ï‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
            // ‡¶è‡¶¨‡¶Ç 'cache: no-store' ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¨‡¶æ‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶Ø‡¶æ‡ßü
            await fetch(targetUrl, { mode: 'no-cors', cache: 'no-store', method: 'HEAD' });
            
            const endTime = performance.now();
            return Math.floor(endTime - startTime);
        } catch (e) {
            return -1; // ‡¶´‡ßá‡¶á‡¶≤ ‡¶π‡¶≤‡ßá
        }
    }

    async function startPingTest() {
        const btn = document.querySelector('.ping-btn');
        btn.innerHTML = "Pinging Servers...";
        btn.disabled = true;

        for (let i = 0; i < locations.length; i++) {
            const span = document.getElementById(`ping-${i}`);
            span.innerText = "Checking...";
            span.className = "ping-value ping-loading";

            // ‡¶™‡¶ø‡¶Ç ‡¶Æ‡¶æ‡¶™‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            const ms = await getPing(locations[i].url);

            // ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            if (ms === -1) {
                span.innerText = "Timeout";
                span.className = "ping-value ping-red";
            } else {
                span.innerText = `${ms} ms`;
                
                // ‡¶ó‡ßá‡¶Æ‡¶ø‡¶Ç ‡¶™‡¶ø‡¶Ç ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
                if (ms < 60) {
                    span.className = "ping-value ping-green"; // ‡¶è‡¶ï‡ßç‡¶∏‡¶ø‡¶≤‡ßá‡¶®‡ßç‡¶ü
                } else if (ms < 120) {
                    span.className = "ping-value ping-yellow"; // ‡¶Æ‡ßã‡¶ü‡¶æ‡¶Æ‡ßÅ‡¶ü‡¶ø
                } else {
                    span.className = "ping-value ping-red"; // ‡¶ñ‡¶æ‡¶∞‡¶æ‡¶™
                }
            }
        }

        btn.innerHTML = "Ping All Locations";
        btn.disabled = false;
    }

    renderList();

</script>

</body>
</html>